<%= turbo_frame_tag "quick_view" do %>
  <div id="quick-view-<%= @goal.id %>" class="fixed rounded-md w-96 border bg-gray-100 shadow-md overflow-hidden">
    <div class="bg-white p-2 border-b border-gray-200 w-full">
      <h3 class="text-lg leading-6 font-medium text-gray-900 truncate">
        <%= @goal.name %>
      </h3>
    </div>
    <div class="flex flex-col">
      <div class="p-2">
        <span class="text-sm">
          <%= t '.progress', spent: @goal.spent, duration: @goal.duration %>
        </span>
        <div class="flex space-x-1">
          <span class="btn-pill-group">
            <%- if @goal.spent > Goal::SPENT_MIN %>
              <%= form_with model: @goal, method: :put, class: "btn" do |f| %>
                <%= f.hidden_field :spent, value: @goal.spent-1 %>
                <%= f.button type: :submit do %>
                  <%= render 'svg/minus', w: 'w-4', h: 'h-4' %>
                <%- end %>
              <%- end %>
            <%- end %>
            <% if @goal.spent < @goal.duration %>
              <%= form_with model: @goal, method: :put, class: "btn" do |f| %>
                <%= f.hidden_field :spent, value: @goal.spent+1 %>
                <%= f.button type: :submit do %>
                <%= render 'svg/plus', w: 'w-4', h: 'h-4' %>
              <%- end %>
              <%- end %>
            <%- end %>
          </span>
          <%= render 'components/progress', percent: @goal.percent %>
          <span class="btn-pill-group">
            <%- if @goal.duration > Goal::DURATION_MIN %>
              <%= form_with model: @goal, method: :put, class: "btn" do |f| %>
                <%= f.hidden_field :duration, value: @goal.duration-1 %>
                <%= f.button type: :submit do %>
                  <%= render 'svg/minus', w: 'w-4', h: 'h-4' %>
                <%- end %>
              <%- end %>
            <%- end %>
            <%= form_with model: @goal, method: :put, class: "btn" do |f| %>
              <%= f.hidden_field :duration, value: @goal.duration+1 %>
              <%= f.button type: :submit do %>
                <%= render 'svg/plus', w: 'w-4', h: 'h-4' %>
              <%- end %>
            <%- end %>
          </span>
        </div>
      </div>
    </div>
  </div>
<%- end %>

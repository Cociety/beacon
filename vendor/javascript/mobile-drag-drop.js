var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var i={};!function(e,n){n(i)}(i,(function(i){var n="dnd-poly-",o=n+"snapback",r="dnd-poly-",h=r+"dragstart-pending",u=r+"dragstart-cancel",g=["none","copy","copyLink","copyMove","link","linkMove","move","all"],b=["none","copy","move","link"];var O=function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,i)}catch(e){}return e}();function a(e){return e&&e.tagName}function c(e,i,n){void 0===n&&(n=!0),document.addEventListener(e,i,!!O&&{passive:n})}function f(e,i){document.removeEventListener(e,i)}function l(e,i,n,o){void 0===o&&(o=!1);var r=O?{passive:!0,capture:o}:o;return e.addEventListener(i,n,r),{off:function(){e.removeEventListener(i,n,r)}}}function d(e){return 0===e.length?0:e.reduce((function(e,i){return i+e}),0)/e.length}function v(e,i){for(var n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].identifier===i)return!0;return!1}function p(e,i,n){for(var o=[],r=[],h=0;h<i.touches.length;h++){var u=i.touches[h];o.push(u[e+"X"]),r.push(u[e+"Y"])}n.x=d(o),n.y=d(r)}var D=["","-webkit-"];function m(e,i,n,o,r){void 0===r&&(r=!0);var h=i.x,u=i.y;o&&(h+=o.x,u+=o.y),r&&(h-=parseInt(e.offsetWidth,10)/2,u-=parseInt(e.offsetHeight,10)/2);for(var g="translate3d("+h+"px,"+u+"px, 0)",b=0;b<D.length;b++){var O=D[b]+"transform";e.style[O]=g+" "+n[b]}}var N=function(){function t(i,n){(this||e).t=i,(this||e).i=n,(this||e).s=b[0]}return Object.defineProperty(t.prototype,"dropEffect",{get:function(){return(this||e).s},set:function(i){0!==(this||e).t.mode&&g.indexOf(i)>-1&&((this||e).s=i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"types",{get:function(){if(0!==(this||e).t.mode)return Object.freeze((this||e).t.types)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectAllowed",{get:function(){return(this||e).t.effectAllowed},set:function(i){2===(this||e).t.mode&&g.indexOf(i)>-1&&((this||e).t.effectAllowed=i)},enumerable:!0,configurable:!0}),t.prototype.setData=function(i,n){if(2===(this||e).t.mode){if(i.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");(this||e).t.data[i]=n,-1===(this||e).t.types.indexOf(i)&&(this||e).t.types.push(i)}},t.prototype.getData=function(i){if(1===(this||e).t.mode||2===(this||e).t.mode)return(this||e).t.data[i]||""},t.prototype.clearData=function(i){if(2===(this||e).t.mode){if(i&&(this||e).t.data[i]){delete(this||e).t.data[i];var n=(this||e).t.types.indexOf(i);return void(n>-1&&(this||e).t.types.splice(n,1))}(this||e).t.data={},(this||e).t.types=[]}},t.prototype.setDragImage=function(i,n,o){2===(this||e).t.mode&&this.i(i,n,o)},t}();function y(e,i){return e?e===g[0]?b[0]:0===e.indexOf(g[1])||e===g[7]?b[1]:0===e.indexOf(g[4])?b[3]:e===g[6]?b[2]:b[1]:3===i.nodeType&&"A"===i.tagName?b[3]:b[1]}function w(e,i,n,o,r,h,u){void 0===h&&(h=!0),void 0===u&&(u=null);var g=function(e,i,n,o,r,h,u){void 0===u&&(u=null);var g=i.changedTouches[0],b=new Event(n,{bubbles:!0,cancelable:o});b.dataTransfer=h,b.relatedTarget=u,b.screenX=g.screenX,b.screenY=g.screenY,b.clientX=g.clientX,b.clientY=g.clientY,b.pageX=g.pageX,b.pageY=g.pageY;var O=e.getBoundingClientRect();return b.offsetX=b.clientX-O.left,b.offsetY=b.clientY-O.top,b}(i,n,e,h,document.defaultView,r,u),b=!i.dispatchEvent(g);return o.mode=0,b}function x(e,i){if(!e||e===g[7])return i;if(i===b[1]){if(0===e.indexOf(b[1]))return b[1]}else if(i===b[3]){if(0===e.indexOf(b[3])||e.indexOf("Link")>-1)return b[3]}else if(i===b[2]&&(0===e.indexOf(b[2])||e.indexOf("Move")>-1))return b[2];return b[0]}var T,E=function(){function t(i,n,o,r){(this||e).h=i,(this||e).o=n,(this||e).u=o,(this||e).l=r,(this||e).v=0,(this||e).p=null,(this||e).g=null,(this||e).m=i,(this||e).I=i.changedTouches[0],(this||e).j=(this||e).C.bind(this||e),(this||e).S=(this||e).k.bind(this||e),c("touchmove",(this||e).j,!1),c("touchend",(this||e).S,!1),c("touchcancel",(this||e).S,!1)}return t.prototype.A=function(){var i=this||e;(this||e).v=1,(this||e).O=b[0],(this||e).D={data:{},effectAllowed:void 0,mode:3,types:[]},(this||e).M={x:null,y:null},(this||e).F={x:null,y:null};var n=(this||e).u;if((this||e).N=new N((this||e).D,(function(e,o,r){n=e,"number"!=typeof o&&"number"!=typeof r||(i.P={x:o||0,y:r||0})})),(this||e).D.mode=2,(this||e).N.dropEffect=b[0],w("dragstart",(this||e).u,(this||e).m,(this||e).D,(this||e).N))return(this||e).v=3,this.T(),!1;p("page",(this||e).m,(this||e).F);var o,r=(this||e).o.dragImageSetup(n);if((this||e).L=(o=r,D.map((function(e){var i=o.style[e+"transform"];return i&&"none"!==i?i.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""}))),r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.zIndex="999999",r.classList.add("dnd-poly-drag-image"),r.classList.add("dnd-poly-icon"),(this||e)._=r,!(this||e).P)if((this||e).o.dragImageOffset)(this||e).P={x:(this||e).o.dragImageOffset.x,y:(this||e).o.dragImageOffset.y};else if((this||e).o.dragImageCenterOnTouch){var h=getComputedStyle(n);(this||e).P={x:0-parseInt(h.marginLeft,10),y:0-parseInt(h.marginTop,10)}}else{var u=n.getBoundingClientRect();h=getComputedStyle(n);(this||e).P={x:u.left-(this||e).I.clientX-parseInt(h.marginLeft,10)+u.width/2,y:u.top-(this||e).I.clientY-parseInt(h.marginTop,10)+u.height/2}}return m((this||e)._,(this||e).F,(this||e).L,(this||e).P,(this||e).o.dragImageCenterOnTouch),document.body.appendChild((this||e)._),(this||e).V=window.setInterval((function(){i.X||(i.X=!0,i.Y(),i.X=!1)}),(this||e).o.iterationInterval),!0},t.prototype.T=function(){(this||e).V&&(clearInterval((this||e).V),(this||e).V=null),f("touchmove",(this||e).j),f("touchend",(this||e).S),f("touchcancel",(this||e).S),(this||e)._&&((this||e)._.parentNode.removeChild((this||e)._),(this||e)._=null),this.l((this||e).o,(this||e).m,(this||e).v)},t.prototype.C=function(i){var n=this||e;if(!1!==v(i,(this||e).I.identifier)){if((this||e).m=i,0===(this||e).v){var o=void 0;if((this||e).o.dragStartConditionOverride)try{o=(this||e).o.dragStartConditionOverride(i)}catch(i){o=!1}else o=1===i.touches.length;return o?void(!0===this.A()&&((this||e).h.preventDefault(),i.preventDefault())):void this.T()}if(i.preventDefault(),p("client",i,(this||e).M),p("page",i,(this||e).F),(this||e).o.dragImageTranslateOverride)try{var r=!1;if((this||e).o.dragImageTranslateOverride(i,{x:(this||e).M.x,y:(this||e).M.y},(this||e).p,(function(e,i){n._&&(r=!0,n.M.x+=e,n.M.y+=i,n.F.x+=e,n.F.y+=i,m(n._,n.F,n.L,n.P,n.o.dragImageCenterOnTouch))})),r)return}catch(i){}m((this||e)._,(this||e).F,(this||e).L,(this||e).P,(this||e).o.dragImageCenterOnTouch)}},t.prototype.k=function(i){if(!1!==v(i,(this||e).I.identifier)){if((this||e).o.dragImageTranslateOverride)try{(this||e).o.dragImageTranslateOverride(void 0,void 0,void 0,(function(){}))}catch(i){}0!==(this||e).v?(i.preventDefault(),(this||e).v="touchcancel"===i.type?3:2):this.T()}},t.prototype.Y=function(){var i=this||e,r=(this||e).O;(this||e).D.mode=3,(this||e).N.dropEffect=b[0];var h=w("drag",(this||e).u,(this||e).m,(this||e).D,(this||e).N);if(h&&((this||e).O=b[0]),h||2===(this||e).v||3===(this||e).v)return this.q((this||e).v)?void function(e,i,n,r){var h=getComputedStyle(e);if("hidden"!==h.visibility&&"none"!==h.display){i.classList.add(o);var u=getComputedStyle(i),g=parseFloat(u.transitionDuration);if(isNaN(g)||0===g)r();else{var b=e.getBoundingClientRect(),O={x:b.left,y:b.top};O.x+=document.body.scrollLeft||document.documentElement.scrollLeft,O.y+=document.body.scrollTop||document.documentElement.scrollTop,O.x-=parseInt(h.marginLeft,10),O.y-=parseInt(h.marginTop,10);var D=parseFloat(u.transitionDelay),N=Math.round(1e3*(g+D));m(i,O,n,void 0,!1),setTimeout(r,N)}}else r()}((this||e).u,(this||e)._,(this||e).L,(function(){i.B()})):void this.B();var u=(this||e).o.elementFromPoint((this||e).M.x,(this||e).M.y),g=(this||e).g;u!==(this||e).p&&u!==(this||e).g&&((this||e).p=u,null!==(this||e).g&&((this||e).D.mode=3,(this||e).N.dropEffect=b[0],w("dragexit",(this||e).g,(this||e).m,(this||e).D,(this||e).N,!1)),null===(this||e).p?(this||e).g=(this||e).p:((this||e).D.mode=3,(this||e).N.dropEffect=y((this||e).D.effectAllowed,(this||e).u),w("dragenter",(this||e).p,(this||e).m,(this||e).D,(this||e).N)?((this||e).g=(this||e).p,(this||e).O=x((this||e).N.effectAllowed,(this||e).N.dropEffect)):(this||e).p!==document.body&&((this||e).g=document.body))),g!==(this||e).g&&a(g)&&((this||e).D.mode=3,(this||e).N.dropEffect=b[0],w("dragleave",g,(this||e).m,(this||e).D,(this||e).N,!1,(this||e).g)),a((this||e).g)&&((this||e).D.mode=3,(this||e).N.dropEffect=y((this||e).D.effectAllowed,(this||e).u),!1===w("dragover",(this||e).g,(this||e).m,(this||e).D,(this||e).N)?(this||e).O=b[0]:(this||e).O=x((this||e).N.effectAllowed,(this||e).N.dropEffect)),r!==(this||e).O&&(this||e)._.classList.remove(n+r);var O=n+(this||e).O;(this||e)._.classList.add(O)},t.prototype.q=function(i){var n=(this||e).O===b[0]||null===(this||e).g||3===i;return n?a((this||e).g)&&((this||e).D.mode=3,(this||e).N.dropEffect=b[0],w("dragleave",(this||e).g,(this||e).m,(this||e).D,(this||e).N,!1)):a((this||e).g)&&((this||e).D.mode=1,(this||e).N.dropEffect=(this||e).O,!0===w("drop",(this||e).g,(this||e).m,(this||e).D,(this||e).N)?(this||e).O=(this||e).N.dropEffect:(this||e).O=b[0]),n},t.prototype.B=function(){(this||e).D.mode=3,(this||e).N.dropEffect=(this||e).O,w("dragend",(this||e).u,(this||e).m,(this||e).D,(this||e).N,!1),(this||e).v=2,this.T()},t}(),I={iterationInterval:150,tryFindDraggableTarget:function(e){var i=e.target;do{if(!1!==i.draggable){if(!0===i.draggable)return i;if(i.getAttribute&&"true"===i.getAttribute("draggable"))return i}}while((i=i.parentNode)&&i!==document.body)},dragImageSetup:function(e){var i=e.cloneNode(!0);return function t(e,i){if(1===e.nodeType){for(var n=getComputedStyle(e),o=0;o<n.length;o++){var r=n[o];i.style.setProperty(r,n.getPropertyValue(r),n.getPropertyPriority(r))}if(i.style.pointerEvents="none",i.removeAttribute("id"),i.removeAttribute("class"),i.removeAttribute("draggable"),"CANVAS"===i.nodeName){var h=e,u=i,g=h.getContext("2d").getImageData(0,0,h.width,h.height);u.getContext("2d").putImageData(g,0,0)}}if(e.hasChildNodes())for(o=0;o<e.childNodes.length;o++)t(e.childNodes[o],i.childNodes[o])}(e,i),i},elementFromPoint:function(e,i){return document.elementFromPoint(e,i)}};function S(e){if(!T){var i=I.tryFindDraggableTarget(e);if(i)try{T=new E(e,I,i,A)}catch(i){throw A(I,e,3),i}}}function k(e){var i=e.target,s=function(e){o.off(),r.off(),g.off(),b.off(),i&&i.dispatchEvent(new CustomEvent(u,{bubbles:!0,cancelable:!0})),clearTimeout(n)};i&&i.dispatchEvent(new CustomEvent(h,{bubbles:!0,cancelable:!0}));var n=window.setTimeout((function(){o.off(),r.off(),g.off(),b.off(),S(e)}),I.holdToDrag),o=l(i,"touchend",s),r=l(i,"touchcancel",s),g=l(i,"touchmove",s),b=l(window,"scroll",s,!0)}function A(e,i,n){if(0===n&&e.defaultActionOverride)try{e.defaultActionOverride(i),i.defaultPrevented}catch(e){}T=null}i.polyfill=function(e){if(e&&Object.keys(e).forEach((function(i){I[i]=e[i]})),!I.forceApply){var i=(n={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:void 0},o=!!window.chrome||/chrome/i.test(navigator.userAgent),n.userAgentSupportingNativeDnD=!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||o&&"ontouchstart"in document.documentElement),n);if(i.userAgentSupportingNativeDnD&&i.draggable&&i.dragEvents)return!1}var n,o;return I.holdToDrag?c("touchstart",k,!1):c("touchstart",S,!1),!0},Object.defineProperty(i,"__esModule",{value:!0})}));export default i;

